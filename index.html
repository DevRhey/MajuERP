<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema ERP - Locacao de Brinquedos e Eventos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">ERP Brinquedos</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="#" data-page="dashboard">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="clientes">Clientes</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="itens">Itens</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="operadores">Monitores</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="eventos">Eventos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="calendario">Calendario</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="orcamentos">Orcamentos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="financeiro">Financeiro</a></li>
                    <li class="nav-item">
                        <button class="btn btn-success btn-sm ms-2" onclick="popularSistema()"><i class="bi bi-database-fill-add"></i> Popular Dados</button>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-danger btn-sm ms-2" onclick="Storage.resetAll(); location.reload();"><i class="bi bi-trash"></i> Limpar Dados</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div id="main-content"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/db.js"></script>
    <script src="assets/js/config.js"></script>
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/notifications.js"></script>
    <script src="assets/js/background-sync.js"></script>
    <script src="assets/js/workers-manager.js"></script>
    <script src="assets/js/ia-orchestrator.js"></script>
    <script src="assets/js/assistente-orquestrador.js"></script>
    <script>
        (function initIndexedDB() {
            simpleDB.init()
                .then(async () => {
                    const hasLocalData = localStorage.getItem('eventos');
                    const hasIndexed = await simpleDB.count('eventos');
                    if (hasLocalData && !hasIndexed) {
                        console.log('[IndexedDB] Importando dados do localStorage...');
                        await simpleDB.syncFromLocalStorage();
                    }
                    console.log('[IndexedDB] Pronto');
                })
                .catch((error) => {
                    console.error('[IndexedDB] Falha ao iniciar:', error);
                    console.warn('[IndexedDB] Usando apenas localStorage');
                });
        })();
    </script>
    <script src="assets/js/ia-cache.js"></script>
    <script src="assets/js/popular-dados.js"></script>
    <script src="assets/js/ia-engine.js"></script>
    <script src="assets/js/ia-modules/calendario-assistente.js"></script>
    <script src="assets/js/ia-modules/financeiro-assistente.js"></script>
    <script src="assets/js/operadores.js"></script>
    <script src="assets/js/clientes.js"></script>
    <script src="assets/js/itens.js"></script>
    <script src="assets/js/eventos.js"></script>
    <script src="assets/js/calendario.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/orcamentos.js"></script>
    <script src="assets/js/financeiro.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/db-admin.js"></script>
</body>
</html>